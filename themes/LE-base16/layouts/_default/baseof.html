<!DOCTYPE html>
<html lang="{{ with .Site.LanguageCode }}{{ . }}{{ else }}en-US{{ end }}">
<head>
    <meta charset="utf-8">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
    <meta name="referrer" content="no-referrer">
    <meta name="renderer" content="webkit">
    <meta name="force-rendering" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    {{ .Hugo.Generator }}

    <meta name="Description" content="{{ with .Description }}{{ . }}{{ else }}{{if .IsPage}}{{ .Summary }}{{ else }}{{ with .Site.Params.description }}{{ . }}{{ end }}{{ end }}{{ end }}">
    {{ template "_internal/schema.html" . }}
    {{ template "_internal/opengraph.html" . }}
    {{ template "_internal/twitter_cards.html" . }}

    <link rel="canonical" href="{{ .Permalink }}">
    <link rel="shortcut icon" href="/favicon.png">
    <link rel="alternate" href="{{ "index.xml" | relURL }}" type="application/rss+xml" title="{{ .Site.Title }}">
    <title>{{ $isHomePage := eq .Title .Site.Title }}{{ .Title }}{{ if eq $isHomePage false }} - {{ .Site.Title }}{{ end }}</title>

    {{- $main := resources.Get "css/main.css" -}}
    {{ $max52em := resources.Get "css/max52em.css" }}
    {{ $single := resources.Get "css/single.css" }}

    {{ $homepage := resources.Get "css/homepage.css" }}
    {{ $highlight := resources.Get "css/highlight.css" }}

    {{ $menu := resources.Get "css/menu.css" -}}
    {{ $isso := resources.Get "css/isso.css" -}}

    {{- $style := slice $homepage $main $max52em $single  $highlight $menu $isso | resources.Concat "/css/style.css" | minify | fingerprint -}}
    {{- with $style | minify -}}
    <style media="screen">{{ .Content | safeCSS }}</style>
    {{ end }}
    
    {{- partial "analytics" . -}}
</head>
<body>
    <header>
        <div class="container clearfix">
            <a class="path" href="{{ .Site.BaseURL }}">[{{ .Site.Title }}]</a>
            <span class="caret"># _</span>
            <div class="right">
                <div class="menu-pc">
                    {{- $menulist := .Site.Menus.main -}}
                    {{- $len := (len $menulist ) -}}
                    {{- range $index, $ele := $menulist -}}
                    <a class="path" href="{{ $ele.URL }}">{{ $ele.Name }}</a>
                    {{- if gt $len (add $index 1) -}}
                    <span> | </span>
                    {{- end -}}
                    {{- end -}}
                </div>
                <div class="menu-mobie">
                    <a class="path" id="hidden-menu-toggle-button" onclick="toggledisplay('hidden-menu','hidden-menu-toggle-button');" href="#">MORE</a>
                </div>
            </div>
        </div>
        <div id="hidden-menu" style="display: none">
            <div class="menu">
                {{- range $index, $ele := $menulist -}}
                <a class="path" href="{{ $ele.URL }}">{{ $ele.Name }}</a>
                {{if gt $len (add $index 1) }}
                <span> | </span>
                {{ end }}
                {{ end }}
            </div>
        </div>
    </header>
    <div class="container">
        {{ block "content" . }}{{ end }}
    </div>

    <footer>
        <div class="container">
            <span class="copyright">&copy; {{ .Site.LastChange.Year }} {{ .Site.Params.AuthorName }} - <a rel="license" href="https://creativecommons.org/licenses/by-nc/4.0/">CC BY-NC 4.0</a></span>
        </div>
    </footer>
    {{ with resources.Get "js/menu.js" | minify }}
    <script>
        {{ .Content | safeJS }}
    </script>
    {{ end }}

    {{- if (and .IsPage .Params.comment | default true ) -}}
        {{ $Title := .Title }}
        {{ with .Page.Site.Params.comments.isso.Host }}
    <script data-isso="{{ . }}" 
        data-title="{{ $Title }} - LowEntorpy"
        data-isso-css="true"
        data-isso-lang="zh_CN"
        data-isso-reply-to-self="false"
        data-isso-reply-notifications="true"
        data-isso-require-author="true" 
        data-isso-require-email="true"
        data-isso-vote="true" src="{{ . }}js/embed.min.js"></script>
        {{ end }}
    {{ end }}

    {{ partial "footer_custom" . }}
</body>
</html>